{"version":3,"file":"build.js","sources":["../src/utils/world.js","../src/utils/display.js","../src/utils/game.js","../src/index.js"],"sourcesContent":["export default { generate, indexToPos, posToIndex, getNeighbors, getAt, setAt, contains }\n\nconst UP_LEFT    = [-1, -1]\nconst UP         = [ 0, -1]\nconst UP_RIGHT   = [ 1, -1]\nconst LEFT       = [-1,  0]\nconst RIGHT      = [ 1,  0]\nconst DOWN_LEFT  = [-1,  1]\nconst DOWN       = [ 0,  1]\nconst DOWN_RIGHT = [ 1,  1]\nconst directions = [UP_LEFT, UP, UP_RIGHT, LEFT, RIGHT, DOWN_LEFT, DOWN, DOWN_RIGHT]\n\nfunction generate(size, ratio) {\n\n  if (!ratio)\n    ratio = 0.8\n\n  var area = size * size\n  var data = new Uint8ClampedArray(area)\n  var i = area\n  while (i--)\n    data[i] = Math.random() > ratio\n\n  return data\n\n}\n\nfunction indexToPos(index, size) {\n  var x = index % size\n  var y = (index - x) / size\n  return [x, y]\n}\n\nfunction posToIndex(pos, size) {\n  var [x, y] = pos\n  return y * size + x\n}\n\nfunction getNeighbors(pos, size) {\n  if (!size)\n    return []\n  var neighbors = []\n  var [x, y] = pos\n  for (var direction of directions) {\n    var [dx, dy] = direction\n    var cx = x + dx\n    var cy = y + dy\n    if (cx < 0)\n      cx += size\n    if (cx >= size)\n      cx -= size\n    if (cy < 0)\n      cy += size\n    if (cy >= size)\n      cy -= size\n    var current = [cx, cy]\n    neighbors.push(current)\n  }\n  return neighbors\n}\n\nfunction getAt(data, pos, size) {\n  if (!size)\n    size = Math.sqrt(data.length)\n  if ( !contains(pos, size) )\n    return null\n  var index = posToIndex(pos, size)\n  return data[index]\n}\n\nfunction setAt(data, pos, id, size) {\n  if (!size)\n    size = Math.sqrt(data.length)\n  if ( !contains(pos, size) )\n    return null\n  var index = posToIndex(pos, size)\n  data[index] = id\n  return id\n}\n\nfunction contains(pos, size) {\n  var [x, y] = pos\n  return x >= 0 && y >= 0 && x < size && y < size\n}\n","function create(width, height) {\n\n  var _width  = width\n  var _height = height\n  if (!height)\n    if ( Array.isArray(width) )\n      [_width, _height] = width\n    else if ( !isNaN(width) )\n      _height = width\n\n  var _aspect = _width / _height\n  var _canvas = document.createElement('canvas')\n  var _canvasWidth  = _canvas.width  = _width\n  var _canvasHeight = _canvas.height = _height\n  var _context = _canvas.getContext('2d')\n  var _parent  = null\n  var _buffer  = null\n\n  function mount(parent) {\n    if (typeof parent === 'string')\n      parent = document.querySelector(parent)\n    if (!parent)\n      throw new TypeError(`Cannot mount display onto parent element '${parent}'`)\n    parent.appendChild(_canvas)\n    _parent = display.parent = parent\n    render()\n    return display\n  }\n\n  function clear() {\n    _context.fillStyle = 'black'\n    _context.fillRect(0, 0, _canvasWidth, _canvasHeight)\n  }\n\n  function render(buffer) {\n    if (!_buffer)\n      clear()\n    buffer = buffer || _buffer\n    if (!buffer)\n      return display\n\n    var imageData = _context.createImageData(_width, _height)\n    var data = imageData.data\n    var index = buffer.length\n    while (index--) {\n      var i = index * 4\n      var x = index % _width\n      var y = (index - x) / _width\n      var status = buffer[index]\n      var value = status ? 255 : 0\n      data[i]     = value\n      data[i + 1] = value\n      data[i + 2] = value\n      data[i + 3] = 255\n    }\n\n    _context.putImageData(imageData, 0, 0)\n\n    _buffer = buffer\n    return display\n  }\n\n  var display = { width: _width, height: _height, aspect: _aspect, context: _context, parent: _parent, mount, clear, render }\n  return display\n\n}\n\nexport default { create }\n","import { World, Display } from './index'\n\nconst DEAD = 0\nconst LIVE = 1\n\nfunction create(size, element) {\n\n  var world   = World.generate(size)\n  var display = Display.create(size).mount('#app').render(world)\n\n  function update(world, size) {\n    var result = []\n    var i = world.length\n    while (i--) {\n      var id = world[i]\n      var pos = World.indexToPos(i, size)\n      var neighbors = World.getNeighbors(pos, size)\n      var live = 0\n      for (var neighbor of neighbors)\n        if (World.getAt(world, neighbor, size) === LIVE)\n          live++\n      // Could abbreviate this using ternaries or raw booleans over here but it's better to keep it legible\n      if (id === LIVE)\n        if (live === 2 || live === 3)\n          id = LIVE\n        else\n          id = DEAD\n      else if (id === DEAD)\n        if (live === 3)\n          id = LIVE\n        else\n          id = DEAD\n        result[i] = id\n    }\n    return result\n  }\n\n  function tick() {\n    game.world = update(game.world, size)\n    display.render(game.world)\n  }\n\n  var game = { update, tick, size, world, display }\n  return game\n\n}\n\nexport default { create, DEAD, LIVE }\n","import { Game, World } from './utils/index'\n\nconst WORLD_SIZE = 128\n\nvar game = Game.create(WORLD_SIZE, '#app')\nvar paused = false\n\nfunction animate() {\n\n  if (keys.tapped.KeyR && !keys.pressed.ControlLeft) {\n    if (!keys.pressed.ShiftLeft)\n      game.world = World.generate(WORLD_SIZE)\n    else\n      game.world = new Uint8ClampedArray(WORLD_SIZE * WORLD_SIZE)\n    game.display.render(game.world)\n  }\n\n  if (!keys.pressed.KeyP) {\n    if (keys.tapped.Space)\n      paused = true, document.body.classList.add('hide-cursor')\n    else if (keys.released.Space)\n      paused = false, document.body.classList.remove('hide-cursor')\n  } else if (keys.tapped.KeyP)\n    paused = !paused\n    \n  if (!paused && !mouse.left && !mouse.right)\n    game.tick()\n\n  updateKeys()\n\n  window.requestAnimationFrame(animate)\n\n}\n\nvar mouse = { left: false, right: false, cell: [] }\nvar keys  = { pressed: {}, tapped: {}, released: {} }\n\nvar parent = game.display.parent\nvar parentRect = parent.getBoundingClientRect()\n\nparent.addEventListener('contextmenu', onContextMenu)\nparent.addEventListener('mousemove',   onMouseMove)\nparent.addEventListener('mousedown',   onMouseClick)\nwindow.addEventListener('mouseup',     onMouseClick)\nwindow.addEventListener('keydown',     onKeyDown)\nwindow.addEventListener('keyup',       onKeyUp)\n\nfunction onMouseMove(event) {\n  var { offsetX: x, offsetY: y } = event\n  var cell = mouse.cell = [ Math.round(x / parentRect.width  * WORLD_SIZE), Math.round(y / parentRect.height * WORLD_SIZE) ]\n  var [cellX, cellY] = cell\n  var value = null\n  if (mouse.left)\n    value = Game.LIVE\n  else if (mouse.right)\n    value = Game.DEAD\n  if (mouse.left || mouse.right) {\n    var index = World.posToIndex(cell, WORLD_SIZE)\n    game.world[index] = value\n    game.display.render(game.world)\n  }\n}\n\nfunction onMouseClick(event) {\n  var isMouseDown = event.type === 'mousedown'\n  var button = event.button\n  if (button === 0)\n    mouse.left  = isMouseDown\n  if (button === 2)\n    mouse.right = isMouseDown\n  if (isMouseDown) {\n    parentRect = parent.getBoundingClientRect()\n    onMouseMove(event)\n  }\n}\n\nfunction onContextMenu(event) {\n  event.preventDefault()\n}\n\nfunction onKeyDown(event) {\n  var code = event.code\n  if (!keys.pressed[code])\n    keys.tapped[code] = true\n  keys.pressed[code] = true\n}\n\nfunction onKeyUp(event) {\n  var code = event.code\n  if (keys.pressed[code])\n    keys.released[code] = true\n  keys.pressed[code] = false\n}\n\nfunction updateKeys() {\n  for (var key in keys.tapped)\n    keys.tapped[key] = false\n  for (var key in keys.released)\n    keys.released[key] = false\n}\n\nanimate()\n"],"names":["generate","indexToPos","posToIndex","getNeighbors","getAt","setAt","contains","UP_LEFT","UP","UP_RIGHT","LEFT","RIGHT","DOWN_LEFT","DOWN","DOWN_RIGHT","directions","size","ratio","area","data","Uint8ClampedArray","i","Math","random","index","x","y","pos","neighbors","direction","dx","dy","cx","cy","current","push","sqrt","length","id","create","width","height","_width","_height","Array","isArray","isNaN","_aspect","_canvas","document","createElement","_canvasWidth","_canvasHeight","_context","getContext","_parent","_buffer","mount","parent","querySelector","TypeError","appendChild","display","clear","fillStyle","fillRect","render","buffer","imageData","createImageData","status","value","putImageData","aspect","context","DEAD","LIVE","element","world","World","Display","update","result","live","neighbor","tick","game","WORLD_SIZE","Game","paused","animate","keys","tapped","KeyR","pressed","ControlLeft","ShiftLeft","KeyP","Space","body","classList","add","released","remove","mouse","left","right","requestAnimationFrame","cell","parentRect","getBoundingClientRect","addEventListener","onContextMenu","onMouseMove","onMouseClick","window","onKeyDown","onKeyUp","event","offsetX","offsetY","round","cellX","cellY","isMouseDown","type","button","preventDefault","code","updateKeys","key"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,YAAe,EAAEA,kBAAF,EAAYC,sBAAZ,EAAwBC,sBAAxB,EAAoCC,0BAApC,EAAkDC,YAAlD,EAAyDC,YAAzD,EAAgEC,kBAAhE,EAAf;;AAEA,IAAMC,UAAa,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,CAAnB;AACA,IAAMC,KAAa,CAAE,CAAF,EAAK,CAAC,CAAN,CAAnB;AACA,IAAMC,WAAa,CAAE,CAAF,EAAK,CAAC,CAAN,CAAnB;AACA,IAAMC,OAAa,CAAC,CAAC,CAAF,EAAM,CAAN,CAAnB;AACA,IAAMC,QAAa,CAAE,CAAF,EAAM,CAAN,CAAnB;AACA,IAAMC,YAAa,CAAC,CAAC,CAAF,EAAM,CAAN,CAAnB;AACA,IAAMC,OAAa,CAAE,CAAF,EAAM,CAAN,CAAnB;AACA,IAAMC,aAAa,CAAE,CAAF,EAAM,CAAN,CAAnB;AACA,IAAMC,aAAa,CAACR,OAAD,EAAUC,EAAV,EAAcC,QAAd,EAAwBC,IAAxB,EAA8BC,KAA9B,EAAqCC,SAArC,EAAgDC,IAAhD,EAAsDC,UAAtD,CAAnB;;AAEA,SAASd,QAAT,CAAkBgB,IAAlB,EAAwBC,KAAxB,EAA+B;;MAEzB,CAACA,KAAL,EACEA,QAAQ,GAAR;;MAEEC,OAAOF,OAAOA,IAAlB;MACIG,OAAO,IAAIC,iBAAJ,CAAsBF,IAAtB,CAAX;MACIG,IAAIH,IAAR;SACOG,GAAP;SACOA,CAAL,IAAUC,KAAKC,MAAL,KAAgBN,KAA1B;GAEF,OAAOE,IAAP;;;AAIF,SAASlB,UAAT,CAAoBuB,KAApB,EAA2BR,IAA3B,EAAiC;MAC3BS,IAAID,QAAQR,IAAhB;MACIU,IAAI,CAACF,QAAQC,CAAT,IAAcT,IAAtB;SACO,CAACS,CAAD,EAAIC,CAAJ,CAAP;;;AAGF,SAASxB,UAAT,CAAoByB,GAApB,EAAyBX,IAAzB,EAA+B;2BAChBW,GADgB;MACxBF,CADwB;MACrBC,CADqB;;SAEtBA,IAAIV,IAAJ,GAAWS,CAAlB;;;AAGF,SAAStB,YAAT,CAAsBwB,GAAtB,EAA2BX,IAA3B,EAAiC;MAC3B,CAACA,IAAL,EACE,OAAO,EAAP;MACEY,YAAY,EAAhB;;4BACaD,GAJkB;MAI1BF,CAJ0B;MAIvBC,CAJuB;;;;;;;yBAKTX,UAAtB,8HAAkC;UAAzBc,SAAyB;;qCACjBA,SADiB;UAC3BC,EAD2B;UACvBC,EADuB;;UAE5BC,KAAKP,IAAIK,EAAb;UACIG,KAAKP,IAAIK,EAAb;UACIC,KAAK,CAAT,EACEA,MAAMhB,IAAN;UACEgB,MAAMhB,IAAV,EACEgB,MAAMhB,IAAN;UACEiB,KAAK,CAAT,EACEA,MAAMjB,IAAN;UACEiB,MAAMjB,IAAV,EACEiB,MAAMjB,IAAN;UACEkB,UAAU,CAACF,EAAD,EAAKC,EAAL,CAAd;gBACUE,IAAV,CAAeD,OAAf;;;;;;;;;;;;;;;;;SAEKN,SAAP;;;AAGF,SAASxB,KAAT,CAAee,IAAf,EAAqBQ,GAArB,EAA0BX,IAA1B,EAAgC;MAC1B,CAACA,IAAL,EACEA,OAAOM,KAAKc,IAAL,CAAUjB,KAAKkB,MAAf,CAAP;MACG,CAAC/B,SAASqB,GAAT,EAAcX,IAAd,CAAN,EACE,OAAO,IAAP;MACEQ,QAAQtB,WAAWyB,GAAX,EAAgBX,IAAhB,CAAZ;SACOG,KAAKK,KAAL,CAAP;;;AAGF,SAASnB,KAAT,CAAec,IAAf,EAAqBQ,GAArB,EAA0BW,EAA1B,EAA8BtB,IAA9B,EAAoC;MAC9B,CAACA,IAAL,EACEA,OAAOM,KAAKc,IAAL,CAAUjB,KAAKkB,MAAf,CAAP;MACG,CAAC/B,SAASqB,GAAT,EAAcX,IAAd,CAAN,EACE,OAAO,IAAP;MACEQ,QAAQtB,WAAWyB,GAAX,EAAgBX,IAAhB,CAAZ;OACKQ,KAAL,IAAcc,EAAd;SACOA,EAAP;;;AAGF,SAAShC,QAAT,CAAkBqB,GAAlB,EAAuBX,IAAvB,EAA6B;4BACdW,GADc;MACtBF,CADsB;MACnBC,CADmB;;SAEpBD,KAAK,CAAL,IAAUC,KAAK,CAAf,IAAoBD,IAAIT,IAAxB,IAAgCU,IAAIV,IAA3C;;;AClFF,SAASuB,MAAT,CAAgBC,KAAhB,EAAuBC,MAAvB,EAA+B;;MAEzBC,SAAUF,KAAd;MACIG,UAAUF,MAAd;MACI,CAACA,MAAL,EACE,IAAKG,MAAMC,OAAN,CAAcL,KAAd,CAAL;;;gCACsBA,KADtB;;UAAA;WAAA;SAEK,IAAK,CAACM,MAAMN,KAAN,CAAN,EACHG,UAAUH,KAAV;;MAEAO,UAAUL,SAASC,OAAvB;MACIK,UAAUC,SAASC,aAAT,CAAuB,QAAvB,CAAd;MACIC,eAAgBH,QAAQR,KAAR,GAAiBE,MAArC;MACIU,gBAAgBJ,QAAQP,MAAR,GAAiBE,OAArC;MACIU,WAAWL,QAAQM,UAAR,CAAmB,IAAnB,CAAf;MACIC,UAAW,IAAf;MACIC,UAAW,IAAf;;WAESC,KAAT,CAAeC,MAAf,EAAuB;QACjB,OAAOA,MAAP,KAAkB,QAAtB,EACEA,SAAST,SAASU,aAAT,CAAuBD,MAAvB,CAAT;QACE,CAACA,MAAL,EACE,MAAM,IAAIE,SAAJ,iDAA2DF,MAA3D,QAAN;WACKG,WAAP,CAAmBb,OAAnB;cACUc,QAAQJ,MAAR,GAAiBA,MAA3B;;WAEOI,OAAP;;;WAGOC,KAAT,GAAiB;aACNC,SAAT,GAAqB,OAArB;aACSC,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwBd,YAAxB,EAAsCC,aAAtC;;;WAGOc,MAAT,CAAgBC,MAAhB,EAAwB;QAClB,CAACX,OAAL,EACEO;aACOI,UAAUX,OAAnB;QACI,CAACW,MAAL,EACE,OAAOL,OAAP;;QAEEM,YAAYf,SAASgB,eAAT,CAAyB3B,MAAzB,EAAiCC,OAAjC,CAAhB;QACIxB,OAAOiD,UAAUjD,IAArB;QACIK,QAAQ2C,OAAO9B,MAAnB;WACOb,OAAP,EAAgB;UACVH,IAAIG,QAAQ,CAAhB;UACIC,IAAID,QAAQkB,MAAhB;UACIhB,IAAI,CAACF,QAAQC,CAAT,IAAciB,MAAtB;UACI4B,SAASH,OAAO3C,KAAP,CAAb;UACI+C,QAAQD,SAAS,GAAT,GAAe,CAA3B;WACKjD,CAAL,IAAckD,KAAd;WACKlD,IAAI,CAAT,IAAckD,KAAd;WACKlD,IAAI,CAAT,IAAckD,KAAd;WACKlD,IAAI,CAAT,IAAc,GAAd;;;aAGOmD,YAAT,CAAsBJ,SAAtB,EAAiC,CAAjC,EAAoC,CAApC;;cAEUD,MAAV;WACOL,OAAP;;;MAGEA,UAAU,EAAEtB,OAAOE,MAAT,EAAiBD,QAAQE,OAAzB,EAAkC8B,QAAQ1B,OAA1C,EAAmD2B,SAASrB,QAA5D,EAAsEK,QAAQH,OAA9E,EAAuFE,YAAvF,EAA8FM,YAA9F,EAAqGG,cAArG,EAAd;SACOJ,OAAP;;;AAIF,cAAe,EAAEvB,cAAF,EAAf;;ACjEA,IAAMoC,OAAO,CAAb;AACA,IAAMC,OAAO,CAAb;;AAEA,SAASrC,QAAT,CAAgBvB,IAAhB,EAAsB6D,OAAtB,EAA+B;;MAEzBC,QAAUC,MAAM/E,QAAN,CAAegB,IAAf,CAAd;MACI8C,UAAUkB,QAAQzC,MAAR,CAAevB,IAAf,EAAqByC,KAArB,CAA2B,MAA3B,EAAmCS,MAAnC,CAA0CY,KAA1C,CAAd;;WAESG,MAAT,CAAgBH,KAAhB,EAAuB9D,IAAvB,EAA6B;QACvBkE,SAAS,EAAb;QACI7D,IAAIyD,MAAMzC,MAAd;WACOhB,GAAP,EAAY;UACNiB,KAAKwC,MAAMzD,CAAN,CAAT;UACIM,MAAMoD,MAAM9E,UAAN,CAAiBoB,CAAjB,EAAoBL,IAApB,CAAV;UACIY,YAAYmD,MAAM5E,YAAN,CAAmBwB,GAAnB,EAAwBX,IAAxB,CAAhB;UACImE,OAAO,CAAX;;;;;;6BACqBvD,SAArB;cAASwD,QAAT;;cACML,MAAM3E,KAAN,CAAY0E,KAAZ,EAAmBM,QAAnB,EAA6BpE,IAA7B,MAAuC4D,IAA3C,EACEO;SAPM;;;;;;;;;;;;;;;;UASN7C,OAAOsC,IAAX;YACMO,SAAS,CAAT,IAAcA,SAAS,CAA3B,EACE7C,KAAKsC,IAAL,CADF,KAGEtC,KAAKqC,IAAL;aACC,IAAIrC,OAAOqC,IAAX,EACH,IAAIQ,SAAS,CAAb,EACE7C,KAAKsC,IAAL,CADF,KAGEtC,KAAKqC,IAAL;aACKtD,CAAP,IAAYiB,EAAZ;;WAEG4C,MAAP;;;WAGOG,IAAT,GAAgB;SACTP,KAAL,GAAaG,OAAOK,KAAKR,KAAZ,EAAmB9D,IAAnB,CAAb;YACQkD,MAAR,CAAeoB,KAAKR,KAApB;;;MAGEQ,OAAO,EAAEL,cAAF,EAAUI,UAAV,EAAgBrE,UAAhB,EAAsB8D,YAAtB,EAA6BhB,gBAA7B,EAAX;SACOwB,IAAP;;;AAIF,cAAe,EAAE/C,gBAAF,EAAUoC,UAAV,EAAgBC,UAAhB,EAAf;;AC7CA,IAAMW,aAAa,GAAnB;;AAEA,IAAID,OAAOE,QAAKjD,MAAL,CAAYgD,UAAZ,EAAwB,MAAxB,CAAX;AACA,IAAIE,SAAS,KAAb;;AAEA,SAASC,OAAT,GAAmB;;MAEbC,KAAKC,MAAL,CAAYC,IAAZ,IAAoB,CAACF,KAAKG,OAAL,CAAaC,WAAtC,EAAmD;QAC7C,CAACJ,KAAKG,OAAL,CAAaE,SAAlB,EACEV,KAAKR,KAAL,GAAaC,MAAM/E,QAAN,CAAeuF,UAAf,CAAb,CADF,KAGED,KAAKR,KAAL,GAAa,IAAI1D,iBAAJ,CAAsBmE,aAAaA,UAAnC,CAAb;SACGzB,OAAL,CAAaI,MAAb,CAAoBoB,KAAKR,KAAzB;;;MAGE,CAACa,KAAKG,OAAL,CAAaG,IAAlB,EAAwB;QAClBN,KAAKC,MAAL,CAAYM,KAAhB,EACET,SAAS,IAAT,EAAexC,SAASkD,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,aAA5B,CAAf,CADF,KAEK,IAAIV,KAAKW,QAAL,CAAcJ,KAAlB,EACHT,SAAS,KAAT,EAAgBxC,SAASkD,IAAT,CAAcC,SAAd,CAAwBG,MAAxB,CAA+B,aAA/B,CAAhB;GAJJ,MAKO,IAAIZ,KAAKC,MAAL,CAAYK,IAAhB,EACLR,SAAS,CAACA,MAAV;;MAEE,CAACA,MAAD,IAAW,CAACe,MAAMC,IAAlB,IAA0B,CAACD,MAAME,KAArC,EACEpB,KAAKD,IAAL;;;;SAIKsB,qBAAP,CAA6BjB,OAA7B;;;AAIF,IAAIc,QAAQ,EAAEC,MAAM,KAAR,EAAeC,OAAO,KAAtB,EAA6BE,MAAM,EAAnC,EAAZ;AACA,IAAIjB,OAAQ,EAAEG,SAAS,EAAX,EAAeF,QAAQ,EAAvB,EAA2BU,UAAU,EAArC,EAAZ;;AAEA,IAAI5C,SAAS4B,KAAKxB,OAAL,CAAaJ,MAA1B;AACA,IAAImD,aAAanD,OAAOoD,qBAAP,EAAjB;;AAEApD,OAAOqD,gBAAP,CAAwB,aAAxB,EAAuCC,aAAvC;AACAtD,OAAOqD,gBAAP,CAAwB,WAAxB,EAAuCE,WAAvC;AACAvD,OAAOqD,gBAAP,CAAwB,WAAxB,EAAuCG,YAAvC;AACAC,OAAOJ,gBAAP,CAAwB,SAAxB,EAAuCG,YAAvC;AACAC,OAAOJ,gBAAP,CAAwB,SAAxB,EAAuCK,SAAvC;AACAD,OAAOJ,gBAAP,CAAwB,OAAxB,EAAuCM,OAAvC;;AAEA,SAASJ,WAAT,CAAqBK,KAArB,EAA4B;MACX7F,CADW,GACO6F,KADP,CACpBC,OADoB;MACC7F,CADD,GACO4F,KADP,CACRE,OADQ;;MAEtBZ,OAAOJ,MAAMI,IAAN,GAAa,CAAEtF,KAAKmG,KAAL,CAAWhG,IAAIoF,WAAWrE,KAAf,GAAwB+C,UAAnC,CAAF,EAAkDjE,KAAKmG,KAAL,CAAW/F,IAAImF,WAAWpE,MAAf,GAAwB8C,UAAnC,CAAlD,CAAxB;MACKmC,KAHqB,GAGLd,IAHK;MAGde,KAHc,GAGLf,IAHK;;MAItBrC,QAAQ,IAAZ;MACIiC,MAAMC,IAAV,EACElC,QAAQiB,QAAKZ,IAAb,CADF,KAEK,IAAI4B,MAAME,KAAV,EACHnC,QAAQiB,QAAKb,IAAb;MACE6B,MAAMC,IAAN,IAAcD,MAAME,KAAxB,EAA+B;QACzBlF,QAAQuD,MAAM7E,UAAN,CAAiB0G,IAAjB,EAAuBrB,UAAvB,CAAZ;SACKT,KAAL,CAAWtD,KAAX,IAAoB+C,KAApB;SACKT,OAAL,CAAaI,MAAb,CAAoBoB,KAAKR,KAAzB;;;;AAIJ,SAASoC,YAAT,CAAsBI,KAAtB,EAA6B;MACvBM,cAAcN,MAAMO,IAAN,KAAe,WAAjC;MACIC,SAASR,MAAMQ,MAAnB;MACIA,WAAW,CAAf,EACEtB,MAAMC,IAAN,GAAcmB,WAAd;MACEE,WAAW,CAAf,EACEtB,MAAME,KAAN,GAAckB,WAAd;MACEA,WAAJ,EAAiB;iBACFlE,OAAOoD,qBAAP,EAAb;gBACYQ,KAAZ;;;;AAIJ,SAASN,aAAT,CAAuBM,KAAvB,EAA8B;QACtBS,cAAN;;;AAGF,SAASX,SAAT,CAAmBE,KAAnB,EAA0B;MACpBU,OAAOV,MAAMU,IAAjB;MACI,CAACrC,KAAKG,OAAL,CAAakC,IAAb,CAAL,EACErC,KAAKC,MAAL,CAAYoC,IAAZ,IAAoB,IAApB;OACGlC,OAAL,CAAakC,IAAb,IAAqB,IAArB;;;AAGF,SAASX,OAAT,CAAiBC,KAAjB,EAAwB;MAClBU,OAAOV,MAAMU,IAAjB;MACIrC,KAAKG,OAAL,CAAakC,IAAb,CAAJ,EACErC,KAAKW,QAAL,CAAc0B,IAAd,IAAsB,IAAtB;OACGlC,OAAL,CAAakC,IAAb,IAAqB,KAArB;;;AAGF,SAASC,UAAT,GAAsB;OACf,IAAIC,GAAT,IAAgBvC,KAAKC,MAArB;SACOA,MAAL,CAAYsC,GAAZ,IAAmB,KAAnB;GACF,KAAK,IAAIA,GAAT,IAAgBvC,KAAKW,QAArB;SACOA,QAAL,CAAc4B,GAAd,IAAqB,KAArB;;;;AAGJxC;;"}