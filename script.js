"use strict";var app=function(){var a,t,e=function(a){for(var t=a.size[0],e=a.size[1],r=a.data.length,i=new a.data.constructor(r),n=0;n<e;n++)for(var d=0;d<t;d++){for(var o=n*t+d,l=0,h=-1;h<=1;h++)for(var u=-1;u<=1;u++)if(u||h){var c=d+u,f=n+h;c<0?c+=t:c>=t&&(c-=t),f<0?f+=e:f>=e&&(f-=e),a.data[f*t+c]&&l++}-1!==(a.data[o]?a.rule.survival:a.rule.birth).indexOf(l)&&(i[o]=1)}a.time++,a.data=i},r=function(a,t){var e=a.world,r=a.cache,i=e.size[0],n=e.size[1];t||(t=document.createElement("canvas")),t.width===i&&t.height===n||(t.width=i,t.height=n);for(var d=t.getContext("2d"),o=d.createImageData(t.width,t.height),l=0;l<n;l++)for(var h=0;h<i;h++){var u=l*i+h;if(e.data[u])o.data[4*u]=0,o.data[4*u+1]=255,o.data[4*u+2]=255,o.data[4*u+3]=255;else for(var c=0;c<r.length;c++)if(r[c]&&"1"===r[c][u]){var f=(r.length-c)/r.length;o.data[4*u]=0,o.data[4*u+1]=0,o.data[4*u+2]=127*f,o.data[4*u+3]=255;break}}return d.putImageData(o,0,0),t},i={cache:new Array(8),world:{time:0,rule:(a="B3/23",{birth:a.slice(1,a.indexOf("/")).split("").map(Number),survival:a.slice(a.indexOf("S")+1).split("").map(Number)}),size:[256,256],data:new Uint8ClampedArray(65536)}};(t=i.world).time=0,t.data=t.data.fill().map(function(a){return Math.random()<.5});var n=r(i);document.body.appendChild(n),requestAnimationFrame(function a(){var t=i.cache,d=i.world;if(t.length){for(var o=t.length-1;o--;)t[o+1]=t[o];t[0]=d.data.join("")}e(d);r(i,n);requestAnimationFrame(a)});return{}}();