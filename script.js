"use strict";var app=function(){var a=function(a){a.time++;for(var t=a.size[0],e=a.size[1],r=a.data.length,n=new a.data.constructor(r),i=0;i<e;i++)for(var o=0;o<t;o++){for(var d=i*t+o,u=0,s=-1;s<=1;s++)for(var h=-1;h<=1;h++)if(h||s){var v=o+h,f=i+s;v<0&&(v+=t),v>=t&&(v-=t),f<0&&(f+=e),f>=e&&(f-=e),a.data[f*t+v]&&u++}-1!==(0===a.data[d]?a.rule.birth:a.rule.survival).indexOf(u)&&(n[d]=1)}a.data=n},t=function(a,t){var e=a.size[0],r=a.size[1];t||(t=document.createElement("canvas")),t.width===e&&t.height===r||(t.width=e,t.height=r);for(var n=t.getContext("2d"),i=n.createImageData(t.width,t.height),o=0;o<r;o++)for(var d=0;d<e;d++){var u=o*e+d;i.data[4*u+3]=255,a.data[u]&&(i.data[4*u]=255,i.data[4*u+1]=255,i.data[4*u+2]=255)}return n.putImageData(i,0,0),t},e=.25,r={then:0,now:0,streak:0},n={time:0,rule:{birth:[3],survival:[2,3]},size:[256,256],data:null};o(n);var i=t(n);function o(a){a.time=0,a.data=new Uint8ClampedArray(a.size[0]*a.size[1]).fill().map(function(a){return Math.random()<e})}document.body.appendChild(i),requestAnimationFrame(function e(){a(n);r.now=0;for(var d=n.data.length;d--;)r.now+=n.data[d];r.now===r.then?(r.streak++,r.streak>=120&&o(n)):r.streak=0;r.then=r.now;t(n,i);requestAnimationFrame(e)});return{}}();